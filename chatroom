#!/bin/env bash

firstexec=0

function group_init() {

	if [[ $firstexec == 0 ]];then
		clear 
		echo "Welcome to Knock Knock chatroom"
		read -p "say hi to another group member with type message right here : " firstmessage
		firstexec=1
	fi
	
	echo $firstmessage | socat - UDP4-DATAGRAM:255.255.255.255:51423,broadcast,bind=:51423

	socat - UDP4-DATAGRAM:255.255.255.255:51423,broadcast,bind=:51423  | while read line; do
	    echo "[$USERNAME@$HOSTNAME] $line"
	done
}

group_init

